{"version":3,"sources":["main.js"],"names":["analysis","file","document","getElementById","files","reader","FileReader","readAsText","onload","f","data","rsArr","this","result","split","i","l","length","push","funDownload","stringify","name","s","poi","indexOf","map","t","trim","join","content","filename","eleLink","createElement","download","style","display","blob","Blob","href","URL","createObjectURL","body","appendChild","click","removeChild","app","Vue","el","year","methods","loadBill","_this","_d","$","getJSON","shift","forEach","getIndexCount","index","tem","count","value","parseFloat","Math","round","computed","index6","index7","arr","sort","b","a","index10","index11","index15","out","sum","yeb"],"mappings":"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","file":"main.js","sourcesContent":["// 6 7 10 11 15\n\nvar app = new Vue({\n  el: document.getElementById('app'),\n  data: {\n    year: ['2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018_6'],\n    data: []\n  },\n  methods: {\n    loadBill(year) {\n      if(!this._d) this._d = {};\n      $.getJSON(`/data/alipay_record_${year}.json`, data => {\n        data.shift();\n        data.forEach(i => {\n          if(!this._d[i[0]]) {\n            this._d[i[0]] = true;\n            this.data.push(i);\n          }\n        });\n      });\n    },\n    getIndexCount(data, index) {\n      var tem = {};\n      data.forEach(i => {\n        if(tem[i[index]]) {\n          tem[i[index]].count++;\n          tem[i[index]].value += parseFloat(i[9]) + parseFloat(i[12]) - parseFloat(i[13]);\n          tem[i[index]].value = Math.round(tem[i[index]].value * 100) / 100;\n        }else {\n          tem[i[index]] = {\n            count: 1,\n            name: i[index],\n            value: parseFloat(i[9]) + parseFloat(i[12]) - parseFloat(i[13])\n          };\n        }\n      });\n      return tem;\n    }\n  },\n  computed: {\n    index6() {\n      return this.getIndexCount(this.data, 6);\n    },\n    index7() {\n      var tem = this.getIndexCount(this.data, 7);\n      var arr = [];\n      for(var i in tem) {\n        arr.push(tem[i]);\n      }\n      arr.sort((b, a) => a.value - b.value);\n      return arr;\n    },\n    index10() {\n      return this.getIndexCount(this.data, 10);\n    },\n    index11() {\n      return this.getIndexCount(this.data, 11);\n    },\n    index15() {\n      return this.getIndexCount(this.data, 15);\n    },\n    out() {\n      var sum = 0;\n      this.data.forEach(i => {\n        if(i[10] == '支出') {\n          sum += parseFloat(i[9]) + parseFloat(i[12]) - parseFloat(i[13]);\n        }\n      });\n      sum = Math.round(sum * 100) / 100;\n      return sum;\n    },\n    yeb() {\n      var sum = 0;\n      this.data.forEach(i => {\n        if(i[8].indexOf('收益发放') != -1 && i[8].indexOf('余额宝') !== -1) {\n          sum += parseFloat(i[9]);\n        }\n      });\n      sum = Math.round(sum * 100) / 100;\n      return sum;\n    }\n  }\n});\n\nfunction analysis() {\n  var file = document.getElementById('file').files[0];\n  var reader = new FileReader();\n  reader.readAsText(file);\n  reader.onload = function(f) {\n    var data = [];\n    var rsArr = this.result.split(\"\\r\\n\");\n    for(var i = 4, l = rsArr.length; i < l; i++) {\n      data.push(rsArr[i].split(','));\n    }\n    funDownload(stringify(data), file.name.split('.')[0] + '.json');\n  };\n}\nfunction stringify(data) {\n  var s = '[';\n  for(var poi = 0, l = data.length; poi < l; poi++) {\n    if(data[poi][0].indexOf('----------') != -1) break;\n    if(poi) {\n      s += ',\\r\\n  [';\n    }else {\n      s += '\\r\\n  [';\n    }\n    s += data[poi].map(t => ('\"' + t.trim() + '\"')).join(', ');\n    s += ']';\n  }\n  s += '\\r\\n]';\n  return s;\n}\nfunction funDownload(content, filename) {\n  var eleLink = document.createElement('a');\n  eleLink.download = filename;\n  eleLink.style.display = 'none';\n  // 字符内容转变成blob地址\n  var blob = new Blob([content]);\n  eleLink.href = URL.createObjectURL(blob);\n  // 触发点击\n  document.body.appendChild(eleLink);\n  eleLink.click();\n  // 然后移除\n  document.body.removeChild(eleLink);\n}"]}